import { Meta } from "@storybook/blocks";

<Meta title="Getting Started/Consent-Management" />

<h1>Integrating easyCredit Web Components with a Consent Management Tool</h1>

If the web components are to be inserted subject to the customer's consent, it is important to ensure that the components are included as an ESM module. Below we show one way to dynamically include the components in conjunction with Usercentrics. Certain components are used in the checkout. If the user does not consent, these components will not be displayed and payment with easyCredit will not be possible.

<h2>Usercentrics Example</h2>

In this case, we use a regular script tag that is executed conditionally and in turn inserts the ESM module:

```html
<script type="text/plain" data-usercentrics="EasyCredit Web Components">
  var scriptTag = document.createElement("script");
  scriptTag.src = "https://ratenkauf.easycredit.de/api/resource/webcomponents/v3/easycredit-components/easycredit-components.esm.js";
  scriptTag.type = "module";

  // Append the new script tag to the document's head or body
  document.head.appendChild(scriptTag);
</script>
```

Further information on conditional integration with Usercentrics can be found here:
https://usercentrics.atlassian.net/wiki/spaces/SKB/pages/699465736/Direct+Implementation#Change-script-type-%E2%80%93-%E2%80%9Ctext-%2F-javascript%E2%80%9D-to-%E2%80%9Ctext-%2F-plain%E2%80%9D
